<!DOCTYPE html>
<html>
<head>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <link rel="stylesheet" href="https://use.typekit.net/qfs6fck.css">


  <link rel="stylesheet" type="text/css" href="theme.css">

</head>
<body>
  <script>
    
	var width = 1366;
    var height = 768;

    var svg = d3.select("body")
      .append("svg")
      .attr("width",width)
      .attr("height",height)
      .style("border", "1px solid #000000");



  </script>
  	<p id="booktext">	
  		In the great green room
	</p>

	<button class="nextPageButton">-></button>

	<script>

	let counter = 0;

	let listOfBookText = ["There was a telephone", 
	"And a red balloon", 
	"And a picture of the cow",
	"Jumping over the moon", 
	"Goodnight moon", 
	"Goodnight cow jumping over the moon", 
	"Goodnight red balloon", 
	"Goodnight telephone", 
	"Goodnight great green room"];

	let gloss = [
  "This is a telephone.", 
  "This is a red balloon.",
  "This is a cow.",
  "This is the moon."
	];



	var room1 = svg.append("rect")
        .attr("x", 0)
        .attr("y", 0)
        .attr("width", width)
        .attr("height", height)
        .attr("fill","green")
        .attr("stroke","none");

      var room2 = svg.append("line")
        .attr("x1", 340)
        .attr("y1", 0)
        .attr("x2", 340)
        .attr("y2", 512)
        .attr("stroke","black")
        .attr("stroke-width",2);

      var room3 = svg.append("line")
        .attr("x1", 1026)
        .attr("y1", 0)
        .attr("x2", 1026)
        .attr("y2", 512)
        .attr("stroke","black")
        .attr("stroke-width",2);

      var room4 = svg.append("line")
        .attr("x1", 340)
        .attr("y1", 512)
        .attr("x2", 1026)
        .attr("y2", 512)
        .attr("stroke","black")
        .attr("stroke-width",2);

      var room5 = svg.append("line")
        .attr("x1", 340)
        .attr("y1", 512)
        .attr("x2", 0)
        .attr("y2", 768)
        .attr("stroke","black")
        .attr("stroke-width",2);

      var room6 = svg.append("line")
        .attr("x1", 1366)
        .attr("y1", 768)
        .attr("x2", 1026)
        .attr("y2", 512)
        .attr("stroke","black")
        .attr("stroke-width",2);

			var nightstand = svg.append("ellipse")
        .attr("cx", 1200)
        .attr("cy", 550)
        .attr("rx", 120)
        .attr("ry", 60)
        .attr("fill","brown")
        .attr("id", "page0")
		.style("opacity", 0);

      var nightstand = svg.append("ellipse")
        .attr("cx", 1200)
        .attr("cy", 700)
        .attr("rx", 60)
        .attr("ry", 30)
        .attr("fill","brown")
        .attr("id", "page0")
		.style("opacity", 0);

      var nightstand = svg.append("rect")
        .attr("x", 1175)
        .attr("y", 500)
        .attr("width", 50)
        .attr("height", 200)
        .attr("fill","brown")
        .attr("stroke","none")
        .attr("id", "page0")
		.style("opacity", 0);

      var telephone = svg.append("rect")
        .attr("x", 1180)
        .attr("y", 490)
        .attr("width", 50)
        .attr("height", 15)
        .attr("fill","black")
        .attr("stroke","none")
        .attr("id", "page0")
		.style("opacity", 0);

      var telephone = svg.append("circle")
        .attr("cx", 1180)
        .attr("cy", 505)
        .attr("r", 15)
        .attr("fill","black")
        .attr("id", "page0")
		.style("opacity", 0);

      var telephone = svg.append("circle")
        .attr("cx", 1230)
        .attr("cy", 505)
        .attr("r", 15)
        .attr("fill","black")
        .attr("id", "page0")
		.style("opacity", 0);

      var telephone = svg.append("ellipse")
        .attr("cx", 1205)
        .attr("cy", 540)
        .attr("rx", 30)
        .attr("ry", 20)
        .attr("fill","black")
        .attr("id", "page0")
		.style("opacity", 0);

    var telephone = svg.append("rect")
        .attr("x", 1200)
        .attr("y", 490)
        .attr("width", 10)
        .attr("height", 50)
        .attr("fill","black")
        .attr("stroke","none")
        .attr("id", "page0")
		.style("opacity", 0);

      var telephone = svg.append("circle")
        .attr("cx", 1205)
        .attr("cy", 540)
        .attr("r", 10)
        .attr("fill","white")
        .attr("id", "page0")
		.style("opacity", 0);

		//Red balloon
      var balloon1 = svg.append("circle")
        .attr("cx", 320)
        .attr("cy", 100)
        .attr("r", 70)
        .attr("fill","red")
        .attr("id", "page1")
        .style("opacity", 0);

      var balloon2 = svg.append("line")
        .attr("x1", 340)
        .attr("y1", 470)
        .attr("x2", 320)
        .attr("y2", 170)
        .attr("stroke","white")
        .attr("stroke-width",1)
        .attr("id", "page1")
        .style("opacity", 0);

      var balloon3 = svg.append("rect")
        .attr("x", 314)
        .attr("y", 160)
        .attr("width", 12)
        .attr("height", 25)
        .attr("fill","red")
        .attr("stroke","none")
        .attr("id", "page1")
        .style("opacity", 0);

      var balloon4 = svg.append("line")
        .attr("x1", 313)
        .attr("y1", 170)
        .attr("x2", 327)
        .attr("y2", 170)
        .attr("stroke","white")
        .attr("stroke-width",1)
        .attr("id", "page1")
        .style("opacity", 0);


//Cow jumping
      var frame1 = svg.append("rect")
        .attr("x", 550)
        .attr("y", 100)
        .attr("width", 400)
        .attr("height", 300)
        .attr("fill","gold")
        .attr("stroke","none")
        .attr("id", "page2")
        .style("opacity", 0);

      var frame2 = svg.append("rect")
        .attr("x", 560)
        .attr("y", 110)
        .attr("width", 380)
        .attr("height", 280)
        .attr("fill","darkblue")
        .attr("stroke","none")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow1 = svg.append("ellipse")
        .attr("cx", 800)
        .attr("cy", 200)
        .attr("rx", 70)
        .attr("ry", 40)
        .attr("fill","white")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow2 = svg.append("ellipse")
        .attr("cx", 700)
        .attr("cy", 140)
        .attr("rx", 15)
        .attr("ry", 10)
        .attr("fill","pink")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow3 = svg.append("ellipse")
        .attr("cx", 760)
        .attr("cy", 140)
        .attr("rx", 15)
        .attr("ry", 10)
        .attr("fill","pink")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow4 = svg.append("ellipse")
        .attr("cx", 730)
        .attr("cy", 160)
        .attr("rx", 25)
        .attr("ry", 30)
        .attr("fill","white")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow5 = svg.append("ellipse")
        .attr("cx", 730)
        .attr("cy", 180)
        .attr("rx", 30)
        .attr("ry", 20)
        .attr("fill","pink")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow6 = svg.append("ellipse")
        .attr("cx", 720)
        .attr("cy", 150)
        .attr("rx", 3)
        .attr("ry", 6)
        .attr("fill", "black")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow7 = svg.append("ellipse")
        .attr("cx", 740)
        .attr("cy", 150)
        .attr("rx", 3)
        .attr("ry", 6)
        .attr("fill", "black")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow8 = svg.append("rect")
        .attr("x", 750)
        .attr("y", 220)
        .attr("width", 15)
        .attr("height", 40)
        .attr("fill","white")
        .attr("transform","translate(360,-480), rotate(45)")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow9 = svg.append("rect")
        .attr("x", 750)
        .attr("y", 220)
        .attr("width", 15)
        .attr("height", 40)
        .attr("fill","white")
        .attr("transform","translate(365,-470), rotate(45)")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow10 = svg.append("rect")
        .attr("x", 750)
        .attr("y", 220)
        .attr("width", 40)
        .attr("height", 15)
        .attr("fill","white")
        .attr("transform","translate(480,-480), rotate(45)")
        .attr("id", "page2")
        .style("opacity", 0);

      var cow11 = svg.append("rect")
        .attr("x", 750)
        .attr("y", 220)
        .attr("width", 40)
        .attr("height", 15)
        .attr("fill","white")
        .attr("transform","translate(475,-470), rotate(45)")
        .attr("id", "page2")
        .style("opacity", 0);

      var balloon20 = svg.append("line")
        .attr("x1", 850)
        .attr("y1", 180)
        .attr("x2", 890)
        .attr("y2", 160)
        .attr("stroke","white")
        .attr("stroke-width",3)
        .attr("id", "page2")
        .style("opacity", 0);

      var cow12 = svg.append("ellipse")
        .attr("cx", 895)
        .attr("cy", 160)
        .attr("rx", 10)
        .attr("ry", 5)
        .attr("fill","white")
        .attr("id", "page2")
        .style("opacity", 0);
		


//Moon
      var moon1 = svg.append("circle")
        .attr("cx", 650)
        .attr("cy", 300)
        .attr("r", 60)
        .attr("fill","yellow")
        .attr("id", "page3")
        .style("opacity", 0);

      var moon2 = svg.append("circle")
        .attr("cx", 675)
        .attr("cy", 285)
        .attr("r", 50)
        .attr("fill","darkblue")
        .attr("id", "page3")
        .style("opacity", 0);

		var dataset = [
      {x: 1200, y: 520, r: 60, id: 0},  // telelphone glow
      {x: 320, y: 110, r: 100, id: 1}, // ballooon glow
      {x: 785, y: 180, r: 90, id: 2}, // cow
      {x: 650, y: 295, r: 70, id: 3} //moon
		];

		var circles = svg.selectAll("glows")
			.data(dataset)
			.enter()
			.append("circle")
			.attr("cx", function(d) {return d.x;})
			.attr("cy", function(d) {return d.y;})
			.attr("r", function(d) {return d.r;})
			.attr("fill", "yellow")
			.attr("id", function(d) {return "glow" + d.id;})
			.style("opacity", 0);

		let roomNoGlow = svg.append("rect")
			.attr("x", 0)
			.attr("y", 0)
			.attr("width", 1366)
			.attr("height", 768)
			.attr("id", "page8")
			.attr("pointer-events", "none")
			.attr("fill", "#000000")
			.style("opacity", 0);

	let nextPageButton = d3.select(".nextPageButton")
		.on("click", function() {
			let opacityChange;
			// show what count we are on in list
			if (counter < 4) {
				opacityChange = 1;
				d3.select("#glow" + counter).on('mouseover', function (d, i) {
				console.log("" + d + " " + i);
	          svg.append("text")
	          .attr("x", 500)
	          .attr("y", 500)
	          .attr("id", "t" + d.id)
	          .text(gloss[d.id]);
               });

			d3.select("#glow" + counter).on('mouseout', function (d, i) {
	          d3.select("#t" + d.id).remove();
            });	
			

			} else if (counter == 4) {
				opacityChange = 0.5;
			}
			else {
				opacityChange = 0.5;
				d3.select("#glow" + (counter - 5)).transition().style("opacity", 0);

			}
				

			d3.selectAll("#page" + counter).transition().style("opacity", opacityChange);
      d3.selectAll("#glow" + (counter - 4)).transition().style("opacity", 0.5);

			

				// change book text
				d3.select("#booktext").text(listOfBookText[counter]);
			counter = counter + 1;

		});


		// TODO : transitions, styling, actual svgs, hoverin goodnights
	</script>
</body>
</html>
